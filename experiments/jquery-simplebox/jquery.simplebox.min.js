/*
 * SimpleBox
 * 
 * A jQuery Lightbox plugin
 * 
 * Author: Wes Todd (http://wesleytodd.com)
 * Plugin Homepage: http://wesleytodd.com/custom-plugins/simplebox/
 * Version: 1.1
 * 
 * Based on: http://css-tricks.com/snippets/jquery/jquery-plugin-template/
 * 
 */
(function(a){a.jwtSimpleBox=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("jwtSimpleBox",d);d.init=function(){if(typeof(b)==="undefined"||b===null){b={}}d.options=a.extend({},a.jwtSimpleBox.defaultOptions,b);d.overlay=a("#jwt_overlay");if(d.overlay.length==0){d.overlay=a(document.createElement("div")).attr("id","jwt_overlay")}d.overlay.css({background:d.options.overlay_background,"z-index":d.options.overlay_zindex});d.$el.css({"z-index":d.options.lightbox_zindex});d.isMobile=navigator.userAgent.match(/(iPad)|(iPhone)|(Android)/i)!=null;if(d.options.use_fixed&&!d.isMobile){d.bFixedSupported=d.fncFixedPositionSupported()}else{d.bFixedSupported=false}if(d.bFixedSupported){d.overlay.css({position:"fixed"});d.$el.css({position:"fixed"})}else{d.overlay.css({position:"absolute"});d.$el.css({position:"absolute"});a(window).scroll(function(){d.updateOverlay();d.updateLightbox()})}d.updateOverlay();d.updateLightbox();a(window).resize(function(){d.updateOverlay();d.updateLightbox()});a(d.options.show_event_target).live(d.options.show_event_type,function(f){d.showOverlay();d.showLightbox();d.updateLightbox();return false});a(d.options.hide_event_target).live(d.options.hide_event_type,function(f){d.hideOverlay();d.hideLightbox();return false});if(d.options.show_now){d.showOverlay();d.showLightbox();d.updateLightbox()}};d.updateOverlay=function(){d.overlay.width(a(window).width()).height(a(window).height());if(d.bFixedSupported){d.overlay.css({top:"0",left:"0"})}else{d.overlay.css({top:a(window).scrollTop(),left:a(window).scrollLeft()})}};d.updateLightbox=function(){var e,f={height:"auto",overflow:"visible"};if(a(window).height()>(d.$el.outerHeight())&&(a(window).height()/2.2)-(d.$el.outerHeight()/2)>0){if(d.bFixedSupported){f=a.extend(f,{top:(a(window).height()/2.2)-(d.$el.outerHeight()/2),left:(a(window).width()/2)-(d.$el.outerWidth()/2)})}else{f=a.extend(f,{top:(a(window).height()/2)+a(window).scrollTop()-(d.$el.height()/2),left:(a(window).width()/2)+a(window).scrollLeft()-(d.$el.width()/2)})}}else{f=a.extend(f,{height:a(window).height()-parseInt(d.$el.css("padding-top"))-parseInt(d.$el.css("padding-bottom"))-30,overflow:"scroll"});if(d.bFixedSupported){f=a.extend(f,{top:"10px",left:(a(window).width()/2)-(d.$el.outerWidth()/2)})}else{f=a.extend(f,{top:(10+a(window).scrollTop()).toString()+"px",left:(a(window).width()/2)+a(window).scrollLeft()-(d.$el.width()/2)})}}if(typeof d.options.position_filter=="function"){e=d.options.position_filter.call(d.$el,f)}if(e!=undefined){f=a.extend({},f,e)}if(navigator.userAgent.match(/iPad/i)!=null){f=d.ipadInputFix(f)}d.$el.css(f)};d.showOverlay=function(){a("body").append(d.overlay);d.overlay.css("display","block")};d.showLightbox=function(){a("body").append(d.$el);if(d.options.show_function=="show"){d.$el.show(d.options.show_duration,d.options.show_easing,null)}else{if(d.options.show_function=="fadeIn"){d.$el.fadeIn(d.options.show_duration,d.options.show_easing,null)}else{if(d.options.show_function=="slideDown"){d.$el.slideDown(d.options.show_duration,d.options.show_easing,null)}else{d.$el.show()}}}if(typeof d.options.show_cb=="function"){d.options.show_cb.call(d)}};d.hideOverlay=function(){d.overlay.css("display","none")};d.hideLightbox=function(){if(d.options.hide_function=="hide"){d.$el.hide(d.options.hide_duration,d.options.hide_easing,null)}else{if(d.options.show_function=="fadeOut"){d.$el.fadeOut(d.options.hide_duration,d.options.hide_easing,null)}else{if(d.options.show_function=="slideUp"){d.$el.slideUp(d.options.hide_duration,d.options.hide_easing,null)}else{d.$el.hide()}}}if(d.isMobile){d.$el.find("input").blur()}if(typeof d.options.hide_cb=="function"){d.options.hide_cb.call(d)}};d.ipadInputFix=function(g){var e={};if(d.$el.find("input:focus").length>0){e={position:"absolute",top:10+a(window).scrollTop(),height:"200px",overflow:"scroll"}}var f=a.extend({},g,e);return f};d.fncFixedPositionSupported=function(){var f=document.body;if(document.createElement&&f&&f.appendChild&&f.removeChild){var h,i,e,g;h=document.createElement("div");if(!h.getBoundingClientRect){return false}h.innerHTML="x";h.style.cssText="position:fixed;top:100px;";f.appendChild(h);i=f.style.height,originalScrollTop=f.scrollTop;f.style.height="3000px";f.scrollTop=500;e=h.getBoundingClientRect().top;f.style.height=i;g=e===100;f.removeChild(h);f.scrollTop=originalScrollTop;return g}return false};d.init()};a.jwtSimpleBox.defaultOptions={overlay_zindex:"999998",lightbox_zindex:"999999",overlay_background:"rgba(0,0,0,.6)",show_event_type:"click",show_event_target:null,show_function:"show",show_duration:0,show_easing:"swing",hide_event_type:"click touchstart",hide_event_target:"#jwt_overlay, #jwt_close",hide_function:"hide",hide_duration:0,hide_easing:"swing",hide_cb:null,use_fixed:true,show_now:false,position_filter:null};a.fn.jwtSimpleBox=function(b){return this.each(function(){a(this).css("display","none");(new a.jwtSimpleBox(this,b))})}})(jQuery);